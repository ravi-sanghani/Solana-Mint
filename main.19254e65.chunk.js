(this["webpackJsonpcandy-machine-mint"] = this["webpackJsonpcandy-machine-mint"] || []).push([[0], { 223: function (e, t, n) { }, 224: function (e, t) { }, 225: function (e, t) { }, 246: function (e, t) { }, 247: function (e, t) { }, 313: function (e, t, n) { }, 314: function (e, t, n) { "use strict"; n.r(t); var r, a = n(0), i = n.n(a), c = n(25), s = n.n(c), o = (n(223), n(19)), u = n(13), l = n(1), b = n(2), d = n(9), p = n(103), f = n(82), g = n(354), m = n(364), h = n(349), x = n(362), j = n(355), v = n(350), O = n(4), y = n(193), k = n(132), w = n(77), S = n(41), T = n(200), P = n(345), M = n(368), A = n(17), E = Object(P.a)((function (e) { return Object(M.a)({ root: { display: "flex", padding: e.spacing(0), "& > *": { margin: e.spacing(.4), width: e.spacing(6), height: e.spacing(6), display: "flex", flexDirection: "column", alignContent: "center", alignItems: "center", justifyContent: "center", background: "#384457", color: "white", borderRadius: 5, fontSize: 10 } }, done: { display: "flex", margin: 0, marginBottom: e.spacing(.5), height: e.spacing(3.5), padding: e.spacing(1), flexDirection: "column", alignContent: "center", alignItems: "center", justifyContent: "center", background: "#384457", color: "white", borderRadius: 5, fontWeight: "bold", fontSize: 18 }, item: { fontWeight: "bold", fontSize: 18 } }) })), K = function (e) { var t = e.date, n = e.status, r = e.style, a = e.onComplete, i = E(); return t ? Object(A.jsx)(T.a, { date: t, onComplete: a, renderer: function (e) { var t = e.days, a = e.hours, c = e.minutes, s = e.seconds; return a += 24 * t, e.completed ? n ? Object(A.jsx)("span", { className: i.done, children: n }) : null : Object(A.jsxs)("div", { className: i.root, style: r, children: [Object(A.jsxs)(h.a, { elevation: 0, children: [Object(A.jsx)("span", { className: i.item, children: a < 10 ? "0".concat(a) : a }), Object(A.jsx)("span", { children: "hrs" })] }), Object(A.jsxs)(h.a, { elevation: 0, children: [Object(A.jsx)("span", { className: i.item, children: c < 10 ? "0".concat(c) : c }), Object(A.jsx)("span", { children: "mins" })] }), Object(A.jsxs)(h.a, { elevation: 0, children: [Object(A.jsx)("span", { className: i.item, children: s < 10 ? "0".concat(s) : s }), Object(A.jsx)("span", { children: "secs" })] })] }) } }) : null }, R = n(347), C = n(353), I = n(76), N = n(204), D = n(105), B = Object(f.default)(R.a)(r || (r = Object(p.a)(["\n  width: 100%;\n  height: 60px;\n  margin-top: 10px;\n  margin-bottom: 5px;\n  background: linear-gradient(180deg, #604ae5 0%, #813eee 100%);\n  color: white;\n  font-size: 16px;\n  font-weight: bold;\n"]))), L = function (e) { var t = e.onMint, n = e.candyMachine, r = e.isMinting, i = e.setIsMinting, c = e.isActive, s = Object(y.b)(), o = Object(N.b)(), u = Object(a.useState)(!1), p = Object(d.a)(u, 2), f = p[0], g = p[1], m = Object(I.useGateway)(), h = m.requestGatewayToken, x = m.gatewayStatus, j = Object(a.useState)(-1), v = Object(d.a)(j, 2), O = v[0], k = v[1], w = Object(a.useState)(!1), S = Object(d.a)(w, 2), T = S[0], P = S[1]; Object(a.useEffect)((function () { var e = function () { var e = Object(b.a)(Object(l.a)().mark((function e() { return Object(l.a)().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, Object(D.removeAccountChangeListener)(o.connection, O); case 2: return e.next = 4, t(); case 4: P(!1), g(!1); case 6: case "end": return e.stop() } }), e) }))); return function () { return e.apply(this, arguments) } }(); f && T && e() }), [f, T, o.connection, t, O]); var M = function (e) { var t = Object(a.useRef)(); return Object(a.useEffect)((function () { t.current = e }), [e]), t.current }(x); return Object(a.useEffect)((function () { var e = [I.GatewayStatus.NOT_REQUESTED, I.GatewayStatus.REFRESH_TOKEN_REQUIRED], t = [].concat(e, [I.GatewayStatus.UNKNOWN]); e.find((function (e) { return M === e })) && !t.find((function (e) { return x === e })) && i(!0), console.log("change: ", x) }), [i, M, x]), Object(A.jsx)(B, { disabled: r || !c, onClick: Object(b.a)(Object(l.a)().mark((function e() { var r, a, i; return Object(l.a)().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (null === n || void 0 === n || !n.state.isActive || null === n || void 0 === n || !n.state.gatekeeper) { e.next = 34; break } if ("ignREusXmGrscGNUesoU9mxfds9AiYTezUKex2PsZV6" !== (r = n.state.gatekeeper.gatekeeperNetwork.toBase58())) { e.next = 13; break } if (x !== I.GatewayStatus.ACTIVE) { e.next = 8; break } return e.next = 6, t(); case 6: e.next = 11; break; case 8: return e.next = 10, h(); case 10: console.log("after: ", x); case 11: e.next = 32; break; case 13: if ("ttib7tuX8PTWPqFsmUFQTj78MbRhUmqxidJRDv4hRRE" !== r && "tibePmPaoTgrs929rWpu755EXaxC7M3SthVCf6GzjZt" !== r) { e.next = 30; break } return P(!0), e.next = 17, Object(D.findGatewayToken)(o.connection, s.publicKey, n.state.gatekeeper.gatekeeperNetwork); case 17: if (null === (a = e.sent) || void 0 === a || !a.isValid()) { e.next = 23; break } return e.next = 21, t(); case 21: e.next = 28; break; case 23: return window.open("https://verify.encore.fans/?gkNetwork=".concat(r), "_blank"), e.next = 26, Object(D.getGatewayTokenAddressForOwnerAndGatekeeperNetwork)(s.publicKey, n.state.gatekeeper.gatekeeperNetwork); case 26: i = e.sent, k(Object(D.onGatewayTokenChange)(o.connection, i, (function () { return g(!0) }), "confirmed")); case 28: e.next = 32; break; case 30: throw P(!1), new Error("Unknown Gatekeeper Network: ".concat(r)); case 32: e.next = 37; break; case 34: return e.next = 36, t(); case 36: P(!1); case 37: case "end": return e.stop() } }), e) }))), variant: "contained", children: null !== n && void 0 !== n && n.state.isSoldOut ? "SOLD OUT" : r ? Object(A.jsx)(C.a, {}) : null !== n && void 0 !== n && n.state.isPresale || null !== n && void 0 !== n && n.state.isWhitelistOnly ? "WHITELIST MINT" : "MINT" }) }; var W, _, U = n(67), F = n(205), G = Object(f.default)(k.a)(W || (W = Object(p.a)(["\n  width: 100%;\n  height: 60px;\n  margin-top: 10px;\n  margin-bottom: 5px;\n  background: linear-gradient(180deg, #604ae5 0%, #813eee 100%);\n  color: white;\n  font-size: 16px;\n  font-weight: bold;\n"]))), Y = f.default.div(_ || (_ = Object(p.a)([""]))), H = function (e) { var t; return e.state.isActive && null !== (t = e.state.endSettings) && void 0 !== t && t.endSettingType.date ? Object(S.g)(e.state.endSettings.number) : Object(S.g)(e.state.goLiveDate ? e.state.goLiveDate : e.state.isPresale ? new o.a((new Date).getTime() / 1e3) : void 0) }, z = function (e) { var t, n, r, i = Object(a.useState)(!1), c = Object(d.a)(i, 2), s = c[0], p = c[1], f = Object(a.useState)(), k = Object(d.a)(f, 2), T = k[0], P = k[1], M = Object(a.useState)({ open: !1, message: "", severity: void 0 }), E = Object(d.a)(M, 2), R = E[0], C = E[1], N = Object(a.useState)(!1), D = Object(d.a)(N, 2), B = D[0], W = D[1], _ = Object(a.useState)(), z = Object(d.a)(_, 2), V = z[0], q = z[1], J = Object(a.useState)(), Z = Object(d.a)(J, 2), Q = Z[0], X = Z[1], $ = Object(a.useState)(!1), ee = Object(d.a)($, 2), te = ee[0], ne = ee[1], re = Object(a.useState)(!1), ae = Object(d.a)(re, 2), ie = ae[0], ce = ae[1], se = Object(a.useState)(!1), oe = Object(d.a)(se, 2), ue = oe[0], le = oe[1], be = Object(a.useState)(), de = Object(d.a)(be, 2), pe = de[0], fe = de[1], ge = Object(a.useState)(!0), me = Object(d.a)(ge, 2), he = me[0], xe = me[1], je = Object(a.useState)(), ve = Object(d.a)(je, 2), Oe = ve[0], ye = ve[1], ke = e.rpcHost, we = Object(y.b)(), Se = Object(a.useMemo)((function () { if (we && we.publicKey && we.signAllTransactions && we.signTransaction) return { publicKey: we.publicKey, signAllTransactions: we.signAllTransactions, signTransaction: we.signTransaction } }), [we]), Te = Object(a.useCallback)(Object(b.a)(Object(l.a)().mark((function t() { var n, r, a, i, c, s, u, b, p, f, g, m, h, x, j, v, y, k, T, M, A, E, K, R, I, N, D, B, L = arguments; return Object(l.a)().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: if (n = L.length > 0 && void 0 !== L[0] ? L[0] : "confirmed", Se) { t.next = 3; break } return t.abrupt("return"); case 3: if (r = new O.Connection(e.rpcHost, n), !e.candyMachineId) { t.next = 90; break } return t.prev = 5, t.next = 8, Object(w.d)(Se, e.candyMachineId, r); case 8: if (p = t.sent, f = (null === p || void 0 === p || null === (a = p.state.goLiveDate) || void 0 === a ? void 0 : a.toNumber()) < (new Date).getTime() / 1e3, g = !1, m = !1, h = p.state.price, null === p || void 0 === p || !p.state.whitelistMintSettings) { t.next = 35; break } return p.state.whitelistMintSettings.presale && (!p.state.goLiveDate || p.state.goLiveDate.toNumber() > (new Date).getTime() / 1e3) && (g = !0), p.state.whitelistMintSettings.discountPrice ? (fe(p.state.whitelistMintSettings.discountPrice), h = p.state.whitelistMintSettings.discountPrice) : (fe(void 0), p.state.whitelistMintSettings.presale || (p.state.isWhitelistOnly = !0)), x = new o.e.PublicKey(p.state.whitelistMintSettings.mint), t.next = 19, Object(S.d)(x, Se.publicKey); case 19: return j = t.sent[0], t.prev = 20, t.next = 23, r.getTokenAccountBalance(j); case 23: v = t.sent, m = parseInt(v.value.amount) > 0, ne(m), p.state.isWhitelistOnly && (f = m && (g || f)), t.next = 35; break; case 29: t.prev = 29, t.t0 = t.catch(20), ne(!1), p.state.isWhitelistOnly && (f = !1), console.log("There was a problem fetching whitelist token balance"), console.log(t.t0); case 35: if (h = m ? h : p.state.price, null === p || void 0 === p || !p.state.tokenMint) { t.next = 58; break } return y = new o.e.PublicKey(p.state.tokenMint), t.next = 40, Object(S.d)(y, Se.publicKey); case 40: return k = t.sent[0], t.prev = 41, t.next = 44, r.getTokenAccountBalance(k); case 44: T = t.sent, M = new o.a(T.value.amount).gte(h), le(M), f = f && M, t.next = 56; break; case 50: t.prev = 50, t.t1 = t.catch(41), le(!1), f = !1, console.log("There was a problem fetching SPL token balance"), console.log(t.t1); case 56: t.next = 66; break; case 58: return t.t2 = o.a, t.next = 61, r.getBalance(Se.publicKey); case 61: t.t3 = t.sent, A = new t.t2(t.t3), E = A.gte(h), le(E), f = f && E; case 66: return null !== p && void 0 !== p && null !== (i = p.state.endSettings) && void 0 !== i && i.endSettingType.date && (q(Object(S.g)(p.state.endSettings.number)), p.state.endSettings.number.toNumber() < (new Date).getTime() / 1e3 && (f = !1)), null !== p && void 0 !== p && null !== (c = p.state.endSettings) && void 0 !== c && c.endSettingType.amount ? (K = Math.min(p.state.endSettings.number.toNumber(), p.state.itemsAvailable), p.state.itemsRedeemed < K ? X(K - p.state.itemsRedeemed) : (X(0), p.state.isSoldOut = !0)) : X(p.state.itemsRemaining), p.state.isSoldOut && (f = !1), t.next = 71, Object(w.e)(e.candyMachineId); case 71: return R = t.sent, I = Object(d.a)(R, 1), N = I[0], t.next = 76, r.getAccountInfo(N); case 76: D = t.sent, W(p.state.isActive = f), ce(p.state.isPresale = g), P(p), B = 892 + (D && p.state.retainAuthority ? 182 : 0) + (p.state.tokenMint ? 66 : 0) + (p.state.whitelistMintSettings ? 34 : 0) + (null !== (s = p.state.whitelistMintSettings) && void 0 !== s && null !== (u = s.mode) && void 0 !== u && u.burnEveryTime ? 34 : 0) + (p.state.gatekeeper ? 33 : 0) + (null !== (b = p.state.gatekeeper) && void 0 !== b && b.expireOnUse ? 66 : 0), xe(B > 1230), t.next = 88; break; case 84: t.prev = 84, t.t4 = t.catch(5), t.t4 instanceof Error ? t.t4.message === "Account does not exist ".concat(e.candyMachineId) ? C({ open: !0, message: "Couldn't fetch candy machine state from candy machine with address: ".concat(e.candyMachineId, ", using rpc: ").concat(e.rpcHost, "! You probably typed the REACT_APP_CANDY_MACHINE_ID value in wrong in your .env file, or you are using the wrong RPC!"), severity: "error", hideDuration: null }) : t.t4.message.startsWith("failed to get info about account") && C({ open: !0, message: "Couldn't fetch candy machine state with rpc: ".concat(e.rpcHost, "! This probably means you have an issue with the REACT_APP_SOLANA_RPC_HOST value in your .env file, or you are not using a custom RPC!"), severity: "error", hideDuration: null }) : C({ open: !0, message: "".concat(t.t4), severity: "error", hideDuration: null }), console.log(t.t4); case 88: t.next = 91; break; case 90: C({ open: !0, message: "Your REACT_APP_CANDY_MACHINE_ID value in the .env file doesn't look right! Make sure you enter it in as plain base-58 address!", severity: "error", hideDuration: null }); case 91: case "end": return t.stop() } }), t, null, [[5, 84], [20, 29], [41, 50]]) }))), [Se, e.candyMachineId, e.rpcHost]), Pe = function () { var t = Object(b.a)(Object(l.a)().mark((function t() { var n, r, a, i, c, s, o, u, b, d, f, g = arguments; return Object(l.a)().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: if (n = g.length > 0 && void 0 !== g[0] ? g[0] : [], r = g.length > 1 && void 0 !== g[1] ? g[1] : [], t.prev = 2, p(!0), null === (a = document.getElementById("#identity")) || void 0 === a || a.click(), !(we.connected && null !== T && void 0 !== T && T.program && we.publicKey)) { t.next = 41; break } if (!he || void 0 !== Oe) { t.next = 26; break } return C({ open: !0, message: "Please sign account setup transaction", severity: "info" }), t.next = 10, Object(w.c)(T, we.publicKey); case 10: if (c = t.sent, s = { err: !0 }, !c.transaction) { t.next = 16; break } return t.next = 15, Object(w.b)(c.transaction, e.txTimeout, e.connection, !0); case 15: s = t.sent; case 16: if (!s || s.err) { t.next = 21; break } ye(c), C({ open: !0, message: "Setup transaction succeeded! Please sign minting transaction", severity: "info" }), t.next = 24; break; case 21: return C({ open: !0, message: "Mint failed! Please try again!", severity: "error" }), p(!1), t.abrupt("return"); case 24: t.next = 27; break; case 26: C({ open: !0, message: "Please sign minting transaction", severity: "info" }); case 27: return t.next = 29, Object(w.f)(T, we.publicKey, n, r, null !== (i = c) && void 0 !== i ? i : Oe); case 29: if (o = t.sent, u = { err: !0 }, b = null, !o) { t.next = 40; break } return t.next = 35, Object(w.b)(o.mintTxId, e.txTimeout, e.connection, !0); case 35: return u = t.sent, t.next = 38, T.program.provider.connection.getAccountInfo(o.metadataKey, "processed"); case 38: b = t.sent, console.log("Metadata status: ", !!b); case 40: u && !u.err && b ? (X(d = Q - 1), W(T.state.isActive = d > 0), T.state.isSoldOut = 0 === d, ye(void 0), C({ open: !0, message: "Congratulations! Mint succeeded!", severity: "success", hideDuration: 7e3 }), Te("processed")) : u && !u.err ? (C({ open: !0, message: "Mint likely failed! Anti-bot SOL 0.01 fee potentially charged! Check the explorer to confirm the mint failed and if so, make sure you are eligible to mint before trying again.", severity: "error", hideDuration: 8e3 }), Te()) : (C({ open: !0, message: "Mint failed! Please try again!", severity: "error" }), Te()); case 41: t.next = 49; break; case 43: t.prev = 43, t.t0 = t.catch(2), f = t.t0.msg || "Minting failed! Please try again!", t.t0.msg ? 311 === t.t0.code ? (console.log(t.t0), f = "SOLD OUT!", window.location.reload()) : 312 === t.t0.code && (f = "Minting period hasn't started yet.") : t.t0.message ? t.t0.message.indexOf("0x137") ? (console.log(t.t0), f = "SOLD OUT!") : t.t0.message.indexOf("0x135") && (f = "Insufficient funds to mint. Please fund your wallet.") : f = "Transaction timeout! Please try again.", C({ open: !0, message: f, severity: "error" }), Te(); case 49: return t.prev = 49, p(!1), t.finish(49); case 52: case "end": return t.stop() } }), t, null, [[2, 43, 49, 52]]) }))); return function () { return t.apply(this, arguments) } }(), Me = function () { var e = !B || ie; e && (T.state.isWhitelistOnly && !te && (e = !1), V && Date.now() >= V.getTime() && (e = !1)), ie && T.state.goLiveDate && T.state.goLiveDate.toNumber() <= (new Date).getTime() / 1e3 && ce(T.state.isPresale = !1), W(T.state.isActive = e) }; return Object(a.useEffect)((function () { Te() }), [Se, e.candyMachineId, e.connection, Te]), Object(a.useEffect)((function () { !function e() { setTimeout((function () { Te(), e() }), 2e4) }() }), [Te]), Object(A.jsxs)(g.a, { style: { marginTop: 100 }, children: [Object(A.jsx)(g.a, { maxWidth: "xs", style: { position: "relative" }, children: Object(A.jsxs)(h.a, { style: { padding: 24, paddingBottom: 10, backgroundColor: "#151A1F", borderRadius: 6 }, children: [we.connected ? Object(A.jsxs)(A.Fragment, { children: [T && Object(A.jsxs)(j.a, { container: !0, direction: "row", justifyContent: "center", wrap: "nowrap", children: [Object(A.jsxs)(j.a, { item: !0, xs: 3, children: [Object(A.jsx)(v.a, { variant: "body2", color: "textSecondary", children: "Remaining" }), Object(A.jsx)(v.a, { variant: "h6", color: "textPrimary", style: { fontWeight: "bold" }, children: "".concat(Q) })] }), Object(A.jsxs)(j.a, { item: !0, xs: 4, children: [Object(A.jsx)(v.a, { variant: "body2", color: "textSecondary", children: te && pe ? "Discount Price" : "Price" }), Object(A.jsx)(v.a, { variant: "h6", color: "textPrimary", style: { fontWeight: "bold" }, children: "\u25ce ".concat(te && pe ? S.c.asNumber(pe) : S.c.asNumber(T.state.price)) })] }), Object(A.jsx)(j.a, { item: !0, xs: 5, children: B && V && Date.now() < V.getTime() ? Object(A.jsxs)(A.Fragment, { children: [Object(A.jsx)(K, { date: H(T), style: { justifyContent: "flex-end" }, status: "COMPLETED", onComplete: Me }, "endSettings"), Object(A.jsx)(v.a, { variant: "caption", align: "center", display: "block", style: { fontWeight: "bold" }, children: "TO END OF MINT" })] }) : Object(A.jsxs)(A.Fragment, { children: [Object(A.jsx)(K, { date: H(T), style: { justifyContent: "flex-end" }, status: null !== T && void 0 !== T && null !== (t = T.state) && void 0 !== t && t.isSoldOut || V && Date.now() > V.getTime() ? "COMPLETED" : ie ? "PRESALE" : "LIVE", onComplete: Me }, "goLive"), ie && T.state.goLiveDate && T.state.goLiveDate.toNumber() > (new Date).getTime() / 1e3 && Object(A.jsx)(v.a, { variant: "caption", align: "center", display: "block", style: { fontWeight: "bold" }, children: "UNTIL PUBLIC MINT" })] }) })] }), Object(A.jsx)(Y, { children: null !== T && void 0 !== T && T.state.isActive && null !== T && void 0 !== T && T.state.gatekeeper && we.publicKey && we.signTransaction ? Object(A.jsx)(I.GatewayProvider, { wallet: { publicKey: we.publicKey || new O.PublicKey(w.a), signTransaction: we.signTransaction }, gatekeeperNetwork: null === T || void 0 === T || null === (n = T.state) || void 0 === n || null === (r = n.gatekeeper) || void 0 === r ? void 0 : r.gatekeeperNetwork, clusterUrl: e.network === F.b.Devnet ? "https://api.devnet.solana.com" : ke, handleTransaction: function () { var t = Object(b.a)(Object(l.a)().mark((function t(n) { return Object(l.a)().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: if (p(!0), !n.signatures.find((function (e) { return e.publicKey.equals(we.publicKey) }))) { t.next = 17; break } return C({ open: !0, message: "Please sign one-time Civic Pass issuance", severity: "info" }), t.prev = 4, t.next = 7, we.signTransaction(n); case 7: n = t.sent, t.next = 15; break; case 10: throw t.prev = 10, t.t0 = t.catch(4), C({ open: !0, message: "User cancelled signing", severity: "error" }), p(!1), t.t0; case 15: t.next = 18; break; case 17: C({ open: !0, message: "Refreshing Civic Pass", severity: "info" }); case 18: return t.prev = 18, t.next = 21, Object(U.c)(e.connection, we, n, [], !0, "confirmed"); case 21: C({ open: !0, message: "Please sign minting", severity: "info" }), t.next = 30; break; case 24: throw t.prev = 24, t.t1 = t.catch(18), C({ open: !0, message: "Solana dropped the transaction, please try again", severity: "warning" }), console.error(t.t1), p(!1), t.t1; case 30: return t.next = 32, Pe(); case 32: case "end": return t.stop() } }), t, null, [[4, 10], [18, 24]]) }))); return function (e) { return t.apply(this, arguments) } }(), broadcastTransaction: !1, options: { autoShowModal: !1 }, children: Object(A.jsx)(L, { candyMachine: T, isMinting: s, setIsMinting: function (e) { return p(e) }, onMint: Pe, isActive: B || ie && te && ue }) }) : Object(A.jsx)(L, { candyMachine: T, isMinting: s, setIsMinting: function (e) { return p(e) }, onMint: Pe, isActive: B || ie && te && ue }) })] }) : Object(A.jsx)(G, { children: "Connect Wallet" }), Object(A.jsx)(v.a, { variant: "caption", align: "center", display: "block", style: { marginTop: 7, color: "grey" }, children: "Powered by METAPLEX" })] }) }), Object(A.jsx)(m.a, { open: R.open, autoHideDuration: void 0 === R.hideDuration ? 6e3 : R.hideDuration, onClose: function () { return C(Object(u.a)(Object(u.a)({}, R), {}, { open: !1 })) }, children: Object(A.jsx)(x.a, { onClose: function () { return C(Object(u.a)(Object(u.a)({}, R), {}, { open: !1 })) }, severity: R.severity, children: R.message }) })] }) }, V = n(365), q = n(366), J = n(367), Z = n(358), Q = n(359), X = n(361), $ = n(363), ee = n(206), te = n(360), ne = Object(ee.a)({ palette: { type: "dark" } }), re = function () { try { return new o.e.PublicKey("Gj9kcoHMVhPLb3PbAuRmyNtgUAQCPmaf6jCSijxiLn8J") } catch (e) { return void console.log("Failed to construct CandyMachineId", e) } }(), ae = "devnet", ie = "https://metaplex.devnet.rpcpool.com/", ce = new o.e.Connection(ie), se = function () { var e = Object(a.useMemo)((function () { return Object(O.clusterApiUrl)(ae) }), []), t = Object(a.useMemo)((function () { return [Object(V.a)(), Object(q.a)(), Object(J.a)(), Object(Z.a)({ network: ae }), Object(Q.a)({ network: ae })] }), []); return Object(A.jsx)(te.a, { theme: ne, children: Object(A.jsx)(X.a, { endpoint: e, children: Object(A.jsx)($.a, { wallets: t, autoConnect: !0, children: Object(A.jsx)(k.b, { children: Object(A.jsx)(z, { candyMachineId: re, connection: ce, txTimeout: U.a, rpcHost: ie, network: ae }) }) }) }) }) }, oe = function (e) { e && e instanceof Function && n.e(3).then(n.bind(null, 369)).then((function (t) { var n = t.getCLS, r = t.getFID, a = t.getFCP, i = t.getLCP, c = t.getTTFB; n(e), r(e), a(e), i(e), c(e) })) }; n(313); s.a.render(Object(A.jsx)(i.a.StrictMode, { children: Object(A.jsx)(se, {}) }), document.getElementById("root")), oe() }, 41: function (e, t, n) { "use strict"; (function (e) { n.d(t, "g", (function () { return o })), n.d(t, "c", (function () { return l })), n.d(t, "b", (function () { return b })), n.d(t, "a", (function () { return d })), n.d(t, "d", (function () { return p })), n.d(t, "e", (function () { return f })), n.d(t, "f", (function () { return g })); var r = n(1), a = n(2), i = n(19), c = n(34), s = n(4), o = function (e) { if (e) return new Date(1e3 * e.toNumber()) }, u = new Intl.NumberFormat("en-US", { style: "decimal", minimumFractionDigits: 2, maximumFractionDigits: 2 }), l = { format: function (e) { return e ? u.format(e) : "--" }, asNumber: function (e) { if (e) return e.toNumber() / s.LAMPORTS_PER_SOL } }, b = new i.e.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"), d = new i.e.PublicKey("gatem74V238djXdzWnJf94Wo1DcnuGkfijbf3AuBhfs"), p = function () { var e = Object(a.a)(Object(r.a)().mark((function e(t, n) { return Object(r.a)().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, i.e.PublicKey.findProgramAddress([n.toBuffer(), c.b.toBuffer(), t.toBuffer()], b); case 2: return e.abrupt("return", e.sent); case 3: case "end": return e.stop() } }), e) }))); return function (t, n) { return e.apply(this, arguments) } }(), f = function () { var t = Object(a.a)(Object(r.a)().mark((function t(n) { return Object(r.a)().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return t.next = 2, i.e.PublicKey.findProgramAddress([n.toBuffer(), e.from("expire")], d); case 2: return t.abrupt("return", t.sent); case 3: case "end": return t.stop() } }), t) }))); return function (e) { return t.apply(this, arguments) } }(), g = function () { var t = Object(a.a)(Object(r.a)().mark((function t(n, a) { return Object(r.a)().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return t.next = 2, i.e.PublicKey.findProgramAddress([n.toBuffer(), e.from("gateway"), e.from([0, 0, 0, 0, 0, 0, 0, 0]), a.toBuffer()], d); case 2: return t.abrupt("return", t.sent); case 3: case "end": return t.stop() } }), t) }))); return function (e, n) { return t.apply(this, arguments) } }() }).call(this, n(10).Buffer) }, 67: function (e, t, n) { "use strict"; n.d(t, "a", (function () { return u })), n.d(t, "b", (function () { return r })), n.d(t, "d", (function () { return b })), n.d(t, "c", (function () { return d })); var r, a = n(14), i = n(1), c = n(2), s = n(4), o = n(95), u = 6e4, l = function () { var e = Object(c.a)(Object(i.a)().mark((function e(t, n) { var r, a; return Object(i.a)().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, t.confirmTransaction(n, "max"); case 2: return e.next = 4, t.getParsedConfirmedTransaction(n); case 4: return r = e.sent, a = [], null !== r && void 0 !== r && r.meta && r.meta.logMessages && r.meta.logMessages.forEach((function (e) { for (var t, n = /Error: (.*)/gm; null !== (t = n.exec(e));)t.index === n.lastIndex && n.lastIndex++, t.length > 1 && a.push(t[1]) })), e.abrupt("return", a); case 8: case "end": return e.stop() } }), e) }))); return function (t, n) { return e.apply(this, arguments) } }(); !function (e) { e[e.Sequential = 0] = "Sequential", e[e.Parallel = 1] = "Parallel", e[e.StopOnFailure = 2] = "StopOnFailure" }(r || (r = {})); var b = function () { var e = Object(c.a)(Object(i.a)().mark((function e(t, n, c, u) { var l, b, d, p, g, m, h, x, j, v, O, y, k, w, S, T, P, M, A = arguments; return Object(i.a)().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (l = A.length > 4 && void 0 !== A[4] ? A[4] : r.Parallel, b = A.length > 5 && void 0 !== A[5] ? A[5] : "singleGossip", d = A.length > 6 && void 0 !== A[6] ? A[6] : function (e, t) { }, p = A.length > 7 && void 0 !== A[7] ? A[7] : function (e, t) { return !1 }, g = A.length > 8 ? A[8] : void 0, m = A.length > 9 && void 0 !== A[9] ? A[9] : [], h = A.length > 10 && void 0 !== A[10] ? A[10] : [], n.publicKey) { e.next = 9; break } throw new o.e; case 9: if (x = m, g) { e.next = 14; break } return e.next = 13, t.getRecentBlockhash(b); case 13: g = e.sent; case 14: j = function (e) { var t = c[e], r = u[e]; if (0 === t.length) return "continue"; var i = new s.Transaction; t.forEach((function (e) { return i.add(e) })), i.recentBlockhash = g.blockhash, i.setSigners.apply(i, [n.publicKey].concat(Object(a.a)(r.map((function (e) { return e.publicKey }))))), r.length > 0 && i.partialSign.apply(i, Object(a.a)(r)), x.push(i) }, v = 0; case 16: if (!(v < c.length)) { e.next = 23; break } if ("continue" !== j(v)) { e.next = 20; break } return e.abrupt("continue", 20); case 20: v++, e.next = 16; break; case 23: return x.push.apply(x, Object(a.a)(h)), O = x.filter((function (e) { return e.signatures.find((function (e) { return e.publicKey.equals(n.publicKey) })) })), y = x.filter((function (e) { return !e.signatures.find((function (e) { return e.publicKey.equals(n.publicKey) })) })), e.next = 28, n.signAllTransactions(O); case 28: k = e.sent, k = y.concat(k), w = [], console.log("Signed txns length", k.length, "vs handed in length", c.length), S = Object(i.a)().mark((function e(n) { var a; return Object(i.a)().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (a = f({ connection: t, signedTransaction: k[n] }), l === r.Parallel) { e.next = 22; break } return e.prev = 2, e.next = 5, a.then((function (e) { var t = e.txid; e.slot; return d(t, n) })); case 5: w.push(a), e.next = 20; break; case 8: if (e.prev = 8, e.t0 = e.catch(2), console.log("Failed at txn index:", n), console.log("Caught failure:", e.t0), p(k[n], n), l !== r.StopOnFailure) { e.next = 20; break } return e.t1 = n, e.next = 17, Promise.all(w); case 17: return e.t2 = e.sent, e.t3 = { number: e.t1, txs: e.t2 }, e.abrupt("return", { v: e.t3 }); case 20: e.next = 23; break; case 22: w.push(a); case 23: case "end": return e.stop() } }), e, null, [[2, 8]]) })), T = 0; case 34: if (!(T < k.length)) { e.next = 42; break } return e.delegateYield(S(T), "t0", 36); case 36: if ("object" !== typeof (P = e.t0)) { e.next = 39; break } return e.abrupt("return", P.v); case 39: T++, e.next = 34; break; case 42: if (l === r.Parallel) { e.next = 47; break } return e.next = 45, Promise.all(w); case 45: return M = e.sent, e.abrupt("return", { number: k.length, txs: M }); case 47: return e.t1 = k.length, e.next = 50, Promise.all(w); case 50: return e.t2 = e.sent, e.abrupt("return", { number: e.t1, txs: e.t2 }); case 52: case "end": return e.stop() } }), e) }))); return function (t, n, r, a) { return e.apply(this, arguments) } }(), d = function () { var e = Object(c.a)(Object(i.a)().mark((function e(t, n, r, c) { var b, d, p, f, g, m, h, j, v, O, y, k, w, S, T = arguments; return Object(i.a)().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (b = !(T.length > 4 && void 0 !== T[4]) || T[4], d = T.length > 5 && void 0 !== T[5] ? T[5] : "singleGossip", p = T.length > 6 && void 0 !== T[6] && T[6], f = T.length > 7 ? T[7] : void 0, n.publicKey) { e.next = 6; break } throw new o.e; case 6: if (!(r instanceof s.Transaction)) { e.next = 10; break } g = r, e.next = 24; break; case 10: if (g = new s.Transaction, r.forEach((function (e) { return g.add(e) })), e.t0 = f, e.t0) { e.next = 17; break } return e.next = 16, t.getRecentBlockhash(d); case 16: e.t0 = e.sent; case 17: if (g.recentBlockhash = e.t0.blockhash, p ? (m = g).setSigners.apply(m, Object(a.a)(c.map((function (e) { return e.publicKey })))) : (h = g).setSigners.apply(h, [n.publicKey].concat(Object(a.a)(c.map((function (e) { return e.publicKey }))))), c.length > 0 && (j = g).partialSign.apply(j, Object(a.a)(c)), p) { e.next = 24; break } return e.next = 23, n.signTransaction(g); case 23: g = e.sent; case 24: return v = g.serialize(), O = { skipPreflight: !0, commitment: d }, e.next = 28, t.sendRawTransaction(v, O); case 28: if (y = e.sent, k = 0, !b) { e.next = 43; break } return e.next = 33, x(y, u, t, d); case 33: if (w = e.sent) { e.next = 36; break } throw new Error("Timed out awaiting confirmation on transaction"); case 36: if (k = (null === w || void 0 === w ? void 0 : w.slot) || 0, null === w || void 0 === w || !w.err) { e.next = 43; break } return e.next = 40, l(t, y); case 40: throw S = e.sent, console.log(S), new Error("Raw transaction ".concat(y, " failed")); case 43: return e.abrupt("return", { txid: y, slot: k }); case 44: case "end": return e.stop() } }), e) }))); return function (t, n, r, a) { return e.apply(this, arguments) } }(), p = function () { return (new Date).getTime() / 1e3 }; function f(e) { return g.apply(this, arguments) } function g() { return (g = Object(c.a)(Object(i.a)().mark((function e(t) { var n, r, a, s, o, l, b, d, f, g, h, j, O; return Object(i.a)().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return n = t.signedTransaction, r = t.connection, a = t.timeout, s = void 0 === a ? u : a, o = n.serialize(), l = p(), b = 0, e.next = 6, r.sendRawTransaction(o, { skipPreflight: !0 }); case 6: return d = e.sent, console.log("Started awaiting confirmation for", d), f = !1, Object(c.a)(Object(i.a)().mark((function e() { return Object(i.a)().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (f || !(p() - l < s)) { e.next = 6; break } return r.sendRawTransaction(o, { skipPreflight: !0 }), e.next = 4, v(500); case 4: e.next = 0; break; case 6: case "end": return e.stop() } }), e) })))(), e.prev = 10, e.next = 13, x(d, s, r, "recent", !0); case 13: if (g = e.sent) { e.next = 16; break } throw new Error("Timed out awaiting confirmation on transaction"); case 16: if (!g.err) { e.next = 19; break } throw console.error(g.err), new Error("Transaction failed: Custom instruction error"); case 19: b = (null === g || void 0 === g ? void 0 : g.slot) || 0, e.next = 47; break; case 22: if (e.prev = 22, e.t0 = e.catch(10), console.error("Timeout Error caught", e.t0), !e.t0.timeout) { e.next = 27; break } throw new Error("Timed out awaiting confirmation on transaction"); case 27: return h = null, e.prev = 28, e.next = 31, m(r, n, "single"); case 31: h = e.sent.value, e.next = 36; break; case 34: e.prev = 34, e.t1 = e.catch(28); case 36: if (!h || !h.err) { e.next = 47; break } if (!h.logs) { e.next = 46; break } j = h.logs.length - 1; case 39: if (!(j >= 0)) { e.next = 46; break } if (!(O = h.logs[j]).startsWith("Program log: ")) { e.next = 43; break } throw new Error("Transaction failed: " + O.slice("Program log: ".length)); case 43: --j, e.next = 39; break; case 46: throw new Error(JSON.stringify(h.err)); case 47: return e.prev = 47, f = !0, e.finish(47); case 50: return console.log("Latency", d, p() - l), e.abrupt("return", { txid: d, slot: b }); case 52: case "end": return e.stop() } }), e, null, [[10, 22, 47, 50], [28, 34]]) })))).apply(this, arguments) } function m(e, t, n) { return h.apply(this, arguments) } function h() { return (h = Object(c.a)(Object(i.a)().mark((function e(t, n, r) { var a, c, s, o, u; return Object(i.a)().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, t._recentBlockhash(t._disableBlockhashCaching); case 2: return n.recentBlockhash = e.sent, a = n.serializeMessage(), c = n._serialize(a), s = c.toString("base64"), o = [s, { encoding: "base64", commitment: r }], e.next = 10, t._rpcRequest("simulateTransaction", o); case 10: if (!(u = e.sent).error) { e.next = 13; break } throw new Error("failed to simulate transaction: " + u.error.message); case 13: return e.abrupt("return", u.result); case 14: case "end": return e.stop() } }), e) })))).apply(this, arguments) } function x(e, t, n) { return j.apply(this, arguments) } function j() { return j = Object(c.a)(Object(i.a)().mark((function e(t, n, r) { var a, s, o, u, l, b = arguments; return Object(i.a)().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return a = b.length > 3 && void 0 !== b[3] ? b[3] : "recent", s = b.length > 4 && void 0 !== b[4] && b[4], o = !1, u = { slot: 0, confirmations: 0, err: null }, l = 0, e.next = 7, new Promise(function () { var e = Object(c.a)(Object(i.a)().mark((function e(b, d) { return Object(i.a)().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: setTimeout((function () { o || (o = !0, console.log("Rejecting for timeout..."), d({ timeout: !0 })) }), n); try { l = r.onSignature(t, (function (e, t) { o = !0, u = { err: e.err, slot: t.slot, confirmations: 0 }, e.err ? (console.log("Rejected via websocket", e.err), d(u)) : (console.log("Resolved via websocket", e), b(u)) }), a) } catch (p) { o = !0, console.error("WS error in setup", t, p) } case 2: if (o || !s) { e.next = 8; break } return Object(c.a)(Object(i.a)().mark((function e() { var n; return Object(i.a)().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.prev = 0, e.next = 3, r.getSignatureStatuses([t]); case 3: n = e.sent, u = n && n.value[0], o || (u ? u.err ? (console.log("REST error for", t, u), o = !0, d(u.err)) : u.confirmations ? (console.log("REST confirmation for", t, u), o = !0, b(u)) : console.log("REST no confirmations for", t, u) : console.log("REST null result for", t, u)), e.next = 11; break; case 8: e.prev = 8, e.t0 = e.catch(0), o || console.log("REST connection error: txid", t, e.t0); case 11: case "end": return e.stop() } }), e, null, [[0, 8]]) })))(), e.next = 6, v(2e3); case 6: e.next = 2; break; case 8: case "end": return e.stop() } }), e) }))); return function (t, n) { return e.apply(this, arguments) } }()); case 7: return u = e.sent, r._signatureSubscriptions[l] && r.removeSignatureListener(l), o = !0, console.log("Returning status", u), e.abrupt("return", u); case 12: case "end": return e.stop() } }), e) }))), j.apply(this, arguments) } function v(e) { return new Promise((function (t) { return setTimeout(t, e) })) } }, 77: function (e, t, n) { "use strict"; (function (e) { n.d(t, "a", (function () { return b })), n.d(t, "b", (function () { return p })), n.d(t, "d", (function () { return g })), n.d(t, "e", (function () { return j })), n.d(t, "c", (function () { return O })), n.d(t, "f", (function () { return y })); var r = n(9), a = n(1), i = n(2), c = n(19), s = n(34), o = n(4), u = n(67), l = n(41), b = new c.e.PublicKey("cndy3Z4yapfJBmL3ShUp5exZKqR3z33thTzeNMm2gRZ"), d = new c.e.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"), p = function () { var e = Object(i.a)(Object(a.a)().mark((function e(t, n, r) { var c, s, o, u, l = arguments; return Object(a.a)().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return c = l.length > 3 && void 0 !== l[3] && l[3], s = !1, o = { slot: 0, confirmations: 0, err: null }, u = 0, e.next = 6, new Promise(function () { var e = Object(i.a)(Object(a.a)().mark((function e(u, l) { return Object(a.a)().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: setTimeout((function () { s || (s = !0, console.log("Rejecting for timeout..."), l({ timeout: !0 })) }), n); case 1: if (s || !c) { e.next = 7; break } return Object(i.a)(Object(a.a)().mark((function e() { var n; return Object(a.a)().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.prev = 0, e.next = 3, r.getSignatureStatuses([t]); case 3: n = e.sent, o = n && n.value[0], s || (o ? o.err ? (console.log("REST error for", t, o), s = !0, l(o.err)) : o.confirmations ? (console.log("REST confirmation for", t, o), s = !0, u(o)) : console.log("REST no confirmations for", t, o) : console.log("REST null result for", t, o)), e.next = 11; break; case 8: e.prev = 8, e.t0 = e.catch(0), s || console.log("REST connection error: txid", t, e.t0); case 11: case "end": return e.stop() } }), e, null, [[0, 8]]) })))(), e.next = 5, k(2e3); case 5: e.next = 1; break; case 7: case "end": return e.stop() } }), e) }))); return function (t, n) { return e.apply(this, arguments) } }()); case 6: return o = e.sent, r._signatureSubscriptions[u] && r.removeSignatureListener(u), s = !0, console.log("Returning status", o), e.abrupt("return", o); case 11: case "end": return e.stop() } }), e) }))); return function (t, n, r) { return e.apply(this, arguments) } }(), f = function (t, n, r, a) { var i = [{ pubkey: n, isSigner: !0, isWritable: !0 }, { pubkey: t, isSigner: !1, isWritable: !0 }, { pubkey: r, isSigner: !1, isWritable: !1 }, { pubkey: a, isSigner: !1, isWritable: !1 }, { pubkey: c.e.SystemProgram.programId, isSigner: !1, isWritable: !1 }, { pubkey: s.b, isSigner: !1, isWritable: !1 }, { pubkey: c.e.SYSVAR_RENT_PUBKEY, isSigner: !1, isWritable: !1 }]; return new c.e.TransactionInstruction({ keys: i, programId: l.b, data: e.from([]) }) }, g = function () { var e = Object(i.a)(Object(a.a)().mark((function e(t, n, r) { var i, s, o, u, l, d, p; return Object(a.a)().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return i = new c.c(r, t, { preflightCommitment: "processed" }), e.next = 3, c.b.fetchIdl(b, i); case 3: return s = e.sent, o = new c.b(s, b, i), e.next = 7, o.account.candyMachine.fetch(n); case 7: return u = e.sent, l = u.data.itemsAvailable.toNumber(), d = u.itemsRedeemed.toNumber(), p = l - d, e.abrupt("return", { id: n, program: o, state: { authority: u.authority, itemsAvailable: l, itemsRedeemed: d, itemsRemaining: p, isSoldOut: 0 === p, isActive: !1, isPresale: !1, isWhitelistOnly: !1, goLiveDate: u.data.goLiveDate, treasury: u.wallet, tokenMint: u.tokenMint, gatekeeper: u.data.gatekeeper, endSettings: u.data.endSettings, whitelistMintSettings: u.data.whitelistMintSettings, hiddenSettings: u.data.hiddenSettings, price: u.data.price, retainAuthority: u.data.retainAuthority } }); case 12: case "end": return e.stop() } }), e) }))); return function (t, n, r) { return e.apply(this, arguments) } }(), m = function () { var t = Object(i.a)(Object(a.a)().mark((function t(n) { return Object(a.a)().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return t.next = 2, c.e.PublicKey.findProgramAddress([e.from("metadata"), d.toBuffer(), n.toBuffer(), e.from("edition")], d); case 2: return t.abrupt("return", t.sent[0]); case 3: case "end": return t.stop() } }), t) }))); return function (e) { return t.apply(this, arguments) } }(), h = function () { var t = Object(i.a)(Object(a.a)().mark((function t(n) { return Object(a.a)().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return t.next = 2, c.e.PublicKey.findProgramAddress([e.from("metadata"), d.toBuffer(), n.toBuffer()], d); case 2: return t.abrupt("return", t.sent[0]); case 3: case "end": return t.stop() } }), t) }))); return function (e) { return t.apply(this, arguments) } }(), x = function () { var t = Object(i.a)(Object(a.a)().mark((function t(n) { return Object(a.a)().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return t.next = 2, c.e.PublicKey.findProgramAddress([e.from("candy_machine"), n.toBuffer()], b); case 2: return t.abrupt("return", t.sent); case 3: case "end": return t.stop() } }), t) }))); return function (e) { return t.apply(this, arguments) } }(), j = function () { var t = Object(i.a)(Object(a.a)().mark((function t(n) { return Object(a.a)().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return t.next = 2, c.e.PublicKey.findProgramAddress([e.from("collection"), n.toBuffer()], b); case 2: return t.abrupt("return", t.sent); case 3: case "end": return t.stop() } }), t) }))); return function (e) { return t.apply(this, arguments) } }(), v = function () { var t = Object(i.a)(Object(a.a)().mark((function t(n, r) { return Object(a.a)().wrap((function (t) { for (; ;)switch (t.prev = t.next) { case 0: return t.next = 2, c.e.PublicKey.findProgramAddress([e.from("metadata"), d.toBuffer(), n.toBuffer(), e.from("collection_authority"), r.toBuffer()], d); case 2: return t.abrupt("return", t.sent[0]); case 3: case "end": return t.stop() } }), t) }))); return function (e, n) { return t.apply(this, arguments) } }(), O = function () { var e = Object(i.a)(Object(a.a)().mark((function e(t, n) { var r, i, o, b; return Object(a.a)().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return r = c.e.Keypair.generate(), e.next = 3, Object(l.d)(r.publicKey, n); case 3: return i = e.sent[0], o = [r], e.t0 = c.e.SystemProgram, e.t1 = n, e.t2 = r.publicKey, e.t3 = s.a.span, e.next = 11, t.program.provider.connection.getMinimumBalanceForRentExemption(s.a.span); case 11: return e.t4 = e.sent, e.t5 = s.b, e.t6 = { fromPubkey: e.t1, newAccountPubkey: e.t2, space: e.t3, lamports: e.t4, programId: e.t5 }, e.t7 = e.t0.createAccount.call(e.t0, e.t6), e.t8 = s.c.createInitMintInstruction(s.b, r.publicKey, 0, n, n), e.t9 = f(i, n, n, r.publicKey), e.t10 = s.c.createMintToInstruction(s.b, r.publicKey, i, n, [], 1), b = [e.t7, e.t8, e.t9, e.t10], e.t11 = r, e.t12 = i, e.next = 23, Object(u.d)(t.program.provider.connection, t.program.provider.wallet, [b], [o], u.b.StopOnFailure, "singleGossip", (function () { }), (function () { return !1 }), void 0, [], []); case 23: return e.t13 = e.sent.txs[0].txid, e.abrupt("return", { mint: e.t11, userTokenAccount: e.t12, transaction: e.t13 }); case 25: case "end": return e.stop() } }), e) }))); return function (t, n) { return e.apply(this, arguments) } }(), y = function () { var e = Object(i.a)(Object(a.a)().mark((function e(t, n) { var i, b, p, g, O, y, k, w, S, T, P, M, A, E, K, R, C, I, N, D, B, L, W, _, U, F, G, Y, H, z, V, q = arguments; return Object(a.a)().wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return b = q.length > 2 && void 0 !== q[2] ? q[2] : [], p = q.length > 3 && void 0 !== q[3] ? q[3] : [], g = q.length > 4 ? q[4] : void 0, O = null !== (i = null === g || void 0 === g ? void 0 : g.mint) && void 0 !== i ? i : c.e.Keypair.generate(), e.next = 6, Object(l.d)(O.publicKey, n); case 6: if (y = e.sent[0], !t.state.tokenMint) { e.next = 13; break } return e.next = 10, Object(l.d)(t.state.tokenMint, n); case 10: e.t0 = e.sent[0], e.next = 14; break; case 13: e.t0 = n; case 14: if (k = e.t0, w = t.id, S = [], T = [], P = [], console.log("SetupState: ", g), g) { e.next = 39; break } return P.push(O), e.t1 = T.push, e.t2 = T, e.t3 = c.e.SystemProgram, e.t4 = n, e.t5 = O.publicKey, e.t6 = s.a.span, e.next = 30, t.program.provider.connection.getMinimumBalanceForRentExemption(s.a.span); case 30: e.t7 = e.sent, e.t8 = s.b, e.t9 = { fromPubkey: e.t4, newAccountPubkey: e.t5, space: e.t6, lamports: e.t7, programId: e.t8 }, e.t10 = e.t3.createAccount.call(e.t3, e.t9), e.t11 = s.c.createInitMintInstruction(s.b, O.publicKey, 0, n, n), e.t12 = f(y, n, n, O.publicKey), e.t13 = s.c.createMintToInstruction(s.b, O.publicKey, y, n, [], 1), e.t14 = [e.t10, e.t11, e.t12, e.t13], e.t1.apply.call(e.t1, e.t2, e.t14); case 39: if (!t.state.gatekeeper) { e.next = 54; break } return e.t15 = S, e.next = 43, Object(l.f)(n, t.state.gatekeeper.gatekeeperNetwork); case 43: if (e.t16 = e.sent[0], e.t17 = { pubkey: e.t16, isWritable: !0, isSigner: !1 }, e.t15.push.call(e.t15, e.t17), !t.state.gatekeeper.expireOnUse) { e.next = 54; break } return S.push({ pubkey: l.a, isWritable: !1, isSigner: !1 }), e.t18 = S, e.next = 51, Object(l.e)(t.state.gatekeeper.gatekeeperNetwork); case 51: e.t19 = e.sent[0], e.t20 = { pubkey: e.t19, isWritable: !1, isSigner: !1 }, e.t18.push.call(e.t18, e.t20); case 54: if (!t.state.whitelistMintSettings) { e.next = 61; break } return M = new c.e.PublicKey(t.state.whitelistMintSettings.mint), e.next = 58, Object(l.d)(M, n); case 58: A = e.sent[0], S.push({ pubkey: A, isWritable: !0, isSigner: !1 }), t.state.whitelistMintSettings.mode.burnEveryTime && (S.push({ pubkey: M, isWritable: !0, isSigner: !1 }), S.push({ pubkey: n, isWritable: !1, isSigner: !0 })); case 61: return t.state.tokenMint && (S.push({ pubkey: k, isWritable: !0, isSigner: !1 }), S.push({ pubkey: n, isWritable: !1, isSigner: !0 })), e.next = 64, h(O.publicKey); case 64: return E = e.sent, e.next = 67, m(O.publicKey); case 67: return K = e.sent, e.next = 70, x(w); case 70: return R = e.sent, C = Object(r.a)(R, 2), I = C[0], N = C[1], console.log(S.map((function (e) { return e.pubkey.toBase58() }))), e.t21 = T, e.next = 78, t.program.instruction.mintNft(N, { accounts: { candyMachine: w, candyMachineCreator: I, payer: n, wallet: t.state.treasury, mint: O.publicKey, metadata: E, masterEdition: K, mintAuthority: n, updateAuthority: n, tokenMetadataProgram: d, tokenProgram: s.b, systemProgram: o.SystemProgram.programId, rent: c.e.SYSVAR_RENT_PUBKEY, clock: c.e.SYSVAR_CLOCK_PUBKEY, recentBlockhashes: o.SYSVAR_SLOT_HASHES_PUBKEY, instructionSysvarAccount: c.e.SYSVAR_INSTRUCTIONS_PUBKEY }, remainingAccounts: S.length > 0 ? S : void 0 }); case 78: return e.t22 = e.sent, e.t21.push.call(e.t21, e.t22), e.next = 82, j(w); case 82: return D = e.sent, B = Object(r.a)(D, 1), L = B[0], e.next = 87, t.program.provider.connection.getAccountInfo(L); case 87: if (!e.sent || !t.state.retainAuthority) { e.next = 118; break } return e.prev = 89, e.next = 92, t.program.account.collectionPda.fetch(L); case 92: return W = e.sent, console.log(W), _ = W.mint, e.next = 97, v(_, L); case 97: if (U = e.sent, console.log(_), !_) { e.next = 113; break } return e.next = 102, h(_); case 102: return F = e.sent, e.next = 105, m(_); case 105: return G = e.sent, console.log("Collection PDA: ", L.toBase58()), console.log("Authority: ", t.state.authority.toBase58()), e.t23 = T, e.next = 111, t.program.instruction.setCollectionDuringMint({ accounts: { candyMachine: w, metadata: E, payer: n, collectionPda: L, tokenMetadataProgram: d, instructions: c.e.SYSVAR_INSTRUCTIONS_PUBKEY, collectionMint: _, collectionMetadata: F, collectionMasterEdition: G, authority: t.state.authority, collectionAuthorityRecord: U } }); case 111: e.t24 = e.sent, e.t23.push.call(e.t23, e.t24); case 113: e.next = 118; break; case 115: e.prev = 115, e.t25 = e.catch(89), console.error(e.t25); case 118: return Y = [T], H = [P], e.prev = 120, e.next = 123, Object(u.d)(t.program.provider.connection, t.program.provider.wallet, Y, H, u.b.StopOnFailure, "singleGossip", (function () { }), (function () { return !1 }), void 0, b, p); case 123: return z = e.sent.txs.map((function (e) { return e.txid })), V = z[0], e.abrupt("return", { mintTxId: V, metadataKey: E }); case 128: e.prev = 128, e.t26 = e.catch(120), console.log(e.t26); case 131: return e.abrupt("return", null); case 132: case "end": return e.stop() } }), e, null, [[89, 115], [120, 128]]) }))); return function (t, n) { return e.apply(this, arguments) } }(), k = function (e) { return new Promise((function (t) { return setTimeout(t, e) })) } }).call(this, n(10).Buffer) } }, [[314, 1, 2]]]);
//# sourceMappingURL=main.19254e65.chunk.js.map
